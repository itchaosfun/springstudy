<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.flowable.org/processdef">
    <process id="hello" name="hello" isExecutable="true">
        <startEvent id="startEvent"/>
        <sequenceFlow sourceRef="startEvent" targetRef="approveTask"/>
        <userTask id="approveTask" name="Approve or reject request"/>
        <sequenceFlow sourceRef="approveTask" targetRef="decision"/>
        <exclusiveGateway id="decision"/>
        <sequenceFlow sourceRef="decision" targetRef="externalSystemCall">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[
          ${approved}
        ]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow sourceRef="decision" targetRef="sendRejectionMail">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[
          ${!approved}
        ]]>
            </conditionExpression>
        </sequenceFlow>

        <serviceTask id="externalSystemCall" flowable:exclusive="true" name="Enter holidays in external sysytem"
                     flowable:class="com.example.flowable_demo.event.ApprovedEvent"/>
        <sequenceFlow sourceRef="externalSystemCall" targetRef="holidayApprovedTask"/>

        <userTask id="holidayApprovedTask" name="Holiday approved"/>
        <sequenceFlow sourceRef="holidayApprovedTask" targetRef="approveEnd"/>

        <serviceTask id="sendRejectionMail" flowable:exclusive="true" name="Send out rejection email"
                     flowable:class="com.example.flowable_demo.event.RejectEvent"/>
        <sequenceFlow sourceRef="sendRejectionMail" targetRef="rejectEnd"/>

        <endEvent id="approveEnd"/>
        <endEvent id="rejectEnd"/>
    </process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_hello">
        <bpmndi:BPMNPlane bpmnElement="hello" id="BPMNPlane_hello">
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-9132cbff-75b4-441a-9cb3-85ebba6f5d8f" bpmnElement="startEvent">
                <omgdc:Bounds x="83.0" y="145.0" width="30.0" height="30.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-f67d4ecd-1a35-4186-b2d6-6d9f18e6def0" bpmnElement="approveTask">
                <omgdc:Bounds x="147.0" y="120.0" width="141.0" height="80.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-f9233552-b375-49c0-bf64-dd38810e7048" bpmnElement="decision">
                <omgdc:Bounds x="319.0" y="140.0" width="40.0" height="40.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-e763fecc-c735-4d4f-bf06-a43be9c2baee" bpmnElement="externalSystemCall">
                <omgdc:Bounds x="433.0" y="120.0" width="100.0" height="80.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-312bc518-f8a8-4c20-8ae2-4b1ffbdecccd" bpmnElement="sendRejectionMail">
                <omgdc:Bounds x="433.0" y="299.0" width="100.0" height="80.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-de3935c9-22fc-4422-b781-568777ceb552" bpmnElement="approveEnd">
                <omgdc:Bounds x="818.0" y="145.0" width="30.0" height="30.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-9ea1f450-ba6c-42ee-9720-6f69c52a31bd" bpmnElement="rejectEnd">
                <omgdc:Bounds x="659.0" y="324.0" width="30.0" height="30.0"/>
            </bpmdi:BPMNShape>
            <bpmdi:BPMNShape xmlns:bpmdi="http://www.omg.org/spec/BPMN/20100524/DI"
                             id="shape-606a5918-d829-4e3d-8717-732049c69958" bpmnElement="holidayApprovedTask">
                <omgdc:Bounds x="624.0" y="120.0" width="100.0" height="80.0"/>
            </bpmdi:BPMNShape>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>
